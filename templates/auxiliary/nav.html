{% load user_filter_tag %}
{% url 'recipes:index' as index %}
{% url 'recipes:subscriptions' as subscriptions %}
{% url 'recipes:new_recipe' as new_recipe %}
{% url 'recipes:favorite' request.user as favorite %}
{% url 'recipes:shoplist' as shoplist %}
<nav class="nav">
  <div class="nav__container container">
      <ul class="nav__items list">
{#{% with url_name=request.resolver_match.view_name %}#}

          <li class="nav__item {% if request.path == index %}nav__item_active{% endif %}"><a href="{% url 'recipes:index' %}" class="nav__link link">Рецепты</a></li>
          {% if user.is_authenticated %}
          <li class="nav__item {% if request.path == subscriptions %}nav__item_active{% endif %}"><a href="{% url 'recipes:subscriptions' %}" class="nav__link link">Мои подписки</a></li>
          <li class="nav__item {% if request.path == new_recipe %}nav__item_active{% endif %}"><a href="{% url 'recipes:new_recipe' %}" class="nav__link link">Создать рецепт</a></li>
          <li class="nav__item {% if request.path == favorite %}nav__item_active{% endif %}"><a href="{% url 'recipes:favorite' request.user %}" class="nav__link link">Избранное</a></li>
          {% endif %}
          <li class="nav__item {% if request.path == shoplist %}nav__item_active{% endif %}"><a href="{{ shoplist }}" class="nav__link link">Список покупок</a> <span class="badge badge_style_blue nav__badge" id="counter">{{ user|shop_count:request}}</span></li>
      </ul>
      <ul class="nav__items list">
      {% if user.is_authenticated %}
          <li class="nav__item"><a href='{% url 'password_change' %}' class="nav__link link">Изменить пароль</a></li>
          <li class="nav__item"><a href='{% url 'logout' %}' class="nav__link link">Выход</a></li>
      {% else %}
          <li class="nav__item"><a href='{% url 'login' %}' class="nav__link link">Войти</a></li>
          <li class="nav__item"><a href='{% url 'auth:signup' %}' class="button button_style_blue">Создать аккаунт</a></li>
      {% endif %}
      </ul>
  </div>
</nav>